<!DOCTYPE html>
<html lang="en">

<head>
    <title>Szubienica</title>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <h1>Szubienica!</h1>
    <script>

        var takeWord = function () {
            return tableOfWords[Math.floor(Math.random() * tableOfWords.length)]
        }

        var prepareTableOfAnswers = function (word) {
            var answers = []
            for (var i = 0; i < word.length; i++) {
                answers[i] = "_"
            }
            return answers
        }
        var showCurrentScore = function (answers) {
            alert(answers.join(" "))
        }
        var loadPlayerShot = function () {
            return prompt("podaj literę")
        }
        var updateGameState = function (shot, word, answers) {
            var howManyLettersFound = 0
            for (var i = 0; i < word.length; i++) {
                if (word[i] === shot) {
                    answers[i] = shot
                    howManyLettersFound = howManyLettersFound + 1
                }
            }
            return { answers, howManyLettersFound }
        }



        // Utwórz tablicę ze słowami
        var tableOfWords = [
            "javascript",
            "monter",
            "niesamowity",
            "piłka",
            "zakola",
            "kapsel",
            "geniusz",
            "monitor"
        ]


        //Wybierz słowo losowe
        var randomWord = takeWord(tableOfWords)

        //Skonfiguruj tablicę z odpowiedziami
        var answers = prepareTableOfAnswers(randomWord)
        var leftLetters = randomWord.length;

        //Główna pętla gry 
        while (leftLetters > 0) {

            //Pokaż graczowi bieżący wynik
            showCurrentScore(answers)

            //Wczytaj strzał gracza
            var shot = loadPlayerShot()
            if (shot === null) {

                //Wyjdź z głównej pętli gry
                break
            } else if (shot.length !== 1) {
                alert("proszę podaj tylko jedną literę")
            } else {

                //zaktualizuj stan gry na podstawie strzału
                var howManyLettersFound
                ({answers, howManyLettersFound} = updateGameState(shot, randomWord, answers))
                leftLetters = leftLetters - howManyLettersFound

            }


            //Koniec głównej pętli gry 
        }

        //pokaż odpowiedzi i pogratuluj
        alert(answers.join(" "))
        alert("Dobra robota, szukane słowo to " + randomWord)
    </script>
</body>

</html>