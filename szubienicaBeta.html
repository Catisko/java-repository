<!DOCTYPE html>
<html lang="en">

<head>
    <title>Szubienica</title>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <h1>Szubienica!</h1>
    <script>
        //ok
        var chooseRandomWord = function () {  //1. 3,  2. 4. 5.
            return tableOfWords[Math.floor(Math.random() * tableOfWords.length)]
        }

        //ok 
        var prepareTableOfAnswers = function (word) {  //1. 3 2. 4. 5.
            var answers = []
            for (var i = 0; i < word.length; i++) {  //1. 3 2. 4. 5.
                answers[i] = "_"
            }
            return answers //1. 3 2. 4. 5.
        }

        //ok
        var showCurrentScore = function (answers) {  //1. 3. 2. 5.
            alert("Bieżący stan gry     " + answers.join(" "))
        }

        //ok
        var loadPlayerShot = function () {  //1. 3 2. 5.
            return prompt("podaj literę")
        }


        //ok
        var updateGameState = function (shot, randomWord, answers, leftLetters, usersLifeNumber) {  //1. 3  5.
            var leftLettersTemp = leftLetters
            for (var i = 0; i < randomWord.length; i++) {  //1. 3  5.
                if (randomWord[i] === shot) {  //1. 3  5.
                    answers[i] = shot
                    leftLetters = leftLetters - 1
                }
            }

            if (leftLettersTemp == leftLetters) {  //3 
                usersLifeNumber = usersLifeNumber - 1
                alert("Niepoprawna odpowiedz.") //3 
            }
            else {
                alert("Poprawna odpowiedz")  //1.
            }
            return { answers, leftLetters, usersLifeNumber }  //1. 3 
        }

        //ok
        var showAnswersAndCongratulate = function (answers) {  //1.
            alert("Dobra robota, szukane słowo to " + randomWord)
        }

        //ok
        var initialStateOfLife = function () {  //1. 3  4.
            var usersLifeNumber = prompt("Podaj ilość żyć")
            if (usersLifeNumber === null) {  //1. 3 
                usersLifeNumber = 3
                alert("Wartość żyć została domyślnie ustawiona na 3")  //1. 3 
            }
            return usersLifeNumber  //1. 3 
        }

        //ok
        var checkEndGameCondition = function (usersLifeNumber, leftLetters) {  //1. 3 
            if (usersLifeNumber < 0) { //3 
                alert("Skończyły ci się życia! Dziekuje za gre. Szukane słowo to " + randomWord)
                return true //3 
            } else if (leftLetters === 0) {  //1.
                alert("Dobra robota, szukane słowo to " + randomWord)  //1.
                return true  //1.
            } else { //1. //3.
                return false //1. 3. 
            }
        }






        // dodanie ilości żyć domyślnie i z opcją wyboru ilości przez gracza. (komunikat o utracie żyć)
        // co strzał informuje o trafieniu true/false błędna odp = -1 życie (wyświetla komunikat o końcu żyć i kończy oraz podaje hasło)
        // informuje o tym czy literka została użyta ponownie, zapamiętuje już użyte literki (wystawia komunikat)
        // liczy kroki w ilu gracz odgadł hasło(wystawia komunikat)




        // Utwórz tablicę ze słowami
        var tableOfWords = [ //1. 2. 3. 4.
            "javascript",
            "monter",
            "niesamowity",
            "piłka",
            "zakola",
            "kapsel",
            "geniusz",
            "monitor"
        ]

        //tutaaj zapytaj o zycia i przypisz do jakiejs zmiennej np usersLifeNumber
        var usersLifeNumber = initialStateOfLife() //1. 2. 3. 4.

        //Wybierz słowo losowe
        var randomWord = chooseRandomWord(tableOfWords) //1. 2.  3.

        //Skonfiguruj tablicę z odpowiedziami
        var answers = prepareTableOfAnswers(randomWord) //1. 2.  3.
        var leftLetters = randomWord.length; //1. 2. 3.


        //Główna pętla gry 
        while (true) { //1. 2. 3.

            //Pokaż graczowi bieżący wynik
            showCurrentScore(answers) //1. 2. 3.

            //Wczytaj strzał gracza

            var shot = loadPlayerShot() //1. 3.
            if (shot === null) { //2.
                //Wyjdź z głównej pętli gry
                break //2.
            }
            else if (shot.length !== 1) { //5.
                alert("Proszę podaj tylko jedną literę.")
            }
            else {
                ({ answers, leftLetters, usersLifeNumber } = updateGameState(shot, randomWord, answers, leftLetters, usersLifeNumber)) //1. 3.


                if (checkEndGameCondition(usersLifeNumber, leftLetters)) {   //1. 3.
                    break
                }
                //Koniec głównej pętli gry 
            }
        }
        //pokaż odpowiedzi i pogratuluj


        //TESTY

        // 1. odgadniecie wszystkich liter hasła bez pomyłki i zakonczenie gry (caly czas poprawne litery)
        // 2. nacisniecie przycisku anuluj konczy gre (po dodaniu zyc przez uzytkownika nacisnij anuluj)
        // 3. utracenie wszystkich żyć, konczy gre (caly czas niepoprawne)
        // 4. wyłączenie strony z grą
        // 5. podawanie caly czas liczby liter wiekszej od 1 (w polu podaj litere)

        //ok

        var checkPrepareTableOfAnswers = function () {
            var word = "monitor"
            var preparedAnswer = prepareTableOfAnswers(word)

            if (preparedAnswer.length === word.length) {
                alert("przygotowane odpowiedzi maja poprawna dlugosc")
            } else {
                alert("przygotowane odpowiedzi nie maja poprawnej dlugosci")
            }

            for (var i = 0; i < preparedAnswer.length; i++) {
                var isDifferent = false
                if (preparedAnswer[i] != "_") {
                    isDifferent = true
                }
            }

            if (!isDifferent) {
                alert("przygotowane odpowiedzi maja poprawna wartosc")
            } else {
                alert("przygotowane odpowiedzi nie maja poprawnej wartosci")
            }
        }

        checkPrepareTableOfAnswers()

    </script>
</body>

</html>